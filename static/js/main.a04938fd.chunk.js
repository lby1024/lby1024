(this["webpackJsonpmy-jira"]=this["webpackJsonpmy-jira"]||[]).push([[0],{1988:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(0),c=n.n(a),i=n(36),o=n.n(i),u=n(25),s=n(26),d=n(156);function j(){var e=Object(u.a)(["\n    width: 100vw;\n    height: 100vh;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return j=function(){return e},e}var l=function(e){var t=e.className;return Object(r.jsx)(b,{className:t,children:Object(r.jsx)(d.a,{size:"large"})})},b=s.a.div(j()),f=n(134),p=n(61);function m(e){var t=Object(a.useRef)(document.title);Object(a.useEffect)((function(){document.title=e}),[e]),Object(a.useEffect)((function(){return function(){document.title=t.current}}),[])}var O=n(160),h=function e(){Object(O.a)(this,e)};h.projectForm=void 0,h.taskForm=void 0,h.epicForm=void 0;var v,x,g,y=h,k=n(23),w=n(1996),I=n(2003),C=n(147),L=n(16),N=n.n(L),E=n(32),T=n(2002),F=n(162),S=n(2004);function P(){return window.localStorage.getItem(x.token)}function M(e){window.localStorage.setItem(x.token,e||"")}!function(e){e.userInfo="me",e.login="login",e.register="register",e.projects="projects",e.users="users",e.kanbans="kanbans",e.kanbansReorder="kanbans/reorder",e.tasks="tasks",e.taskTypes="taskTypes",e.tasksReorder="tasks/reorder",e.epics="epics"}(v||(v={})),function(e){e.token="token"}(x||(x={})),function(e){e.userInfo="userInfo",e.projects="projects",e.project="project",e.users="users",e.kanbans="kanbans",e.kanban="kanban",e.tasks="tasks",e.taskTypes="taskTypes",e.epics="epics"}(g||(g={}));var D=n(271),A="https://online.com";function Q(e){return z.apply(this,arguments)}function z(){return(z=Object(E.a)(N.a.mark((function e(t){var n,r,a,c,i=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},"GET"===(r=B(n)).method.toUpperCase()?(a=D.stringify(n.data))&&(t+="?".concat(a)):r.body=JSON.stringify(n.data||{}),e.next=5,window.fetch("".concat(A,"/").concat(t),r);case 5:return c=e.sent,e.next=8,R(c);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return Object(k.a)({method:"GET",headers:{Authorization:e.token?"Bearer ".concat(e.token):"","Content-Type":e.data?"application/json":""}},e)}function R(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(E.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=3;break}return K(),e.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u9646"}));case 3:return e.next=5,t.json();case 5:if(n=e.sent,!t.ok){e.next=10;break}return e.abrupt("return",n);case 10:return e.abrupt("return",Promise.reject(n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){var e=Object(F.b)().getQueryData(g.userInfo);return function(t,n){return Q(t,Object(k.a)(Object(k.a)({},n),{},{token:null===e||void 0===e?void 0:e.token}))}}var V=function(){var e=Object(E.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(v.register,{method:"POST",data:t});case 2:return n=e.sent,M((r=n.user).token),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(E.a)(N.a.mark((function e(t){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(v.login,{method:"POST",data:t});case 2:return n=e.sent,M((r=n.user).token),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){window.localStorage.removeItem(x.token),window.location.reload()};function H(){return G.apply(this,arguments)}function G(){return(G=Object(E.a)(N.a.mark((function e(){var t,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P()){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,Q(v.userInfo,{token:t});case 5:return n=e.sent,e.abrupt("return",n.user);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return Object(T.a)(g.userInfo,H)}function U(){var e=q();function t(){return(t=Object(E.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.users);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(T.a)(g.users,(function(){return t.apply(this,arguments)}))}var W=n(51);function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u8d1f\u8d23\u4eba",n=0,r=Object(a.useMemo)((function(){var r={label:t,value:n};if(!e)return[r];var a=null===e||void 0===e?void 0:e.map((function(e){return{label:e.name,value:e.id}}));return[r].concat(Object(W.a)(a))}),[e]);return{options:r,defaultValue:n}}function $(){var e=Object(u.a)(["\n    .ant-select-selection-item {\n        text-align: left;\n    }\n"]);return $=function(){return e},e}var _=function(e){var t=X(U().data),n=t.options,a=t.defaultValue;return Object(r.jsx)(ee,Object(k.a)(Object(k.a)({},e),{},{value:e.value||a,options:n}))},ee=Object(s.a)(C.a)($()),te=n(34),ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=Object(a.useState)(e),r=Object(te.a)(n,2),c=r[0],i=r[1],o=Object(a.useRef)(e);return Object(a.useEffect)((function(){var n=setTimeout((function(){i(e)}),t);return function(){o.current=e,clearTimeout(n)}}),[e]),c},re=n(161),ae=n(79),ce=function(e){if(!e)return{};var t=Object(k.a)({},e);return Object.keys(t).forEach((function(e){var n,r=t[e];0===(n=r)||n||delete t[e]})),t};function ie(e){var t=Object(ae.c)(),n=Object(te.a)(t,2),r=n[0],c=n[1];return{params:Object(a.useMemo)((function(){return e.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(re.a)({},t,r.get(t)))}),{})}),[r]),setParams:function(e){var t=ce(Object(k.a)(Object(k.a)({},Object.fromEntries(r)),e));c(t)}}}function oe(e,t){var n=Object(F.b)();return{onMutate:function(r){return Object(E.a)(N.a.mark((function a(){var c,i;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=n.getQueryData(e),i=t(c,r),n.setQueryData(e,i),a.abrupt("return",c);case 4:case"end":return a.stop()}}),a)})))()},onSuccess:function(){n.invalidateQueries(e)},onError:function(t,r,a){n.setQueryData(e,a)}}}function ue(e){return oe(e,je)}function se(e){return oe(e,le)}function de(e){return oe(e,be)}function je(e,t){return e=e.map((function(e){return e.id===t.id?Object(k.a)(Object(k.a)({},e),t):e})),Object(W.a)(e)}function le(e,t){e=e||[];var n=Object(k.a)({},t);return n.id=n.id||+new Date,console.log([].concat(Object(W.a)(e),[n]),"--- kkk"),[].concat(Object(W.a)(e),[n])}function be(e,t){return e=e.filter((function(e){return e.id!==t.id})),Object(W.a)(e)}function fe(){var e=ie(["name","personId"]),t=e.params,n=e.setParams;return{params:Object(a.useMemo)((function(){return Object(k.a)(Object(k.a)({},t),{},{personId:Number(t.personId)||void 0})}),[t]),setParams:n}}var pe=function(){var e=q(),t=fe().params,n=ne(t);function r(){return(r=Object(E.a)(N.a.mark((function t(){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.projects,{data:n});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(T.a)([g.projects,n],(function(){return r.apply(this,arguments)}))},me=function(e){var t=q();function n(){return(n=Object(E.a)(N.a.mark((function n(){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t("".concat(v.projects,"/").concat(e));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(T.a)([g.project,{id:e}],(function(){return n.apply(this,arguments)}),{enabled:!!e})},Oe=function(){var e=fe().params,t=[g.projects,e],n=q();function r(){return(r=Object(E.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(v.projects,"/").concat(t.id),{method:"PATCH",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),ue(t))};function he(){var e=fe().params,t=[g.projects,e],n=q();function r(){return(r=Object(E.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(v.projects,{method:"POST",data:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),se(t))}function ve(){var e=Object(u.a)(["\n    margin-bottom: 2rem\n"]);return ve=function(){return e},e}var xe=function(){var e=fe(),t=e.params,n=e.setParams;return Object(r.jsxs)(ge,{layout:"inline",children:[Object(r.jsx)(w.a.Item,{children:Object(r.jsx)(I.a,{type:"text",placeholder:"\u9879\u76ee\u540d",value:t.name,onChange:function(e){return r=e.target.value,void n(Object(k.a)(Object(k.a)({},t),{},{name:r}));var r}})}),Object(r.jsx)(w.a.Item,{children:Object(r.jsx)(_,{value:t.personId,onChange:function(e){n(Object(k.a)(Object(k.a)({},t),{},{personId:e||void 0}))}})})]})},ge=Object(s.a)(w.a)(ve()),ye=n(1995),ke=n(146),we=n.n(ke),Ie=n(1998),Ce=n(108),Le=n(184),Ne=function(e){var t=e.project,n=function(){var e=fe().params,t=[g.projects,e],n=q();function r(){return(r=Object(E.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(v.projects,"/").concat(t.id),{method:"DELETE"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),de(t))}().mutateAsync;var a=Object(r.jsxs)(Ce.a,{children:[Object(r.jsx)(Ce.a.Item,{onClick:function(){y.projectForm(t)},children:"\u7f16\u8f91"}),Object(r.jsx)(Ce.a.Item,{onClick:function(){Ie.a.confirm({content:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",onOk:function(){n(t)}})},children:"\u5220\u9664"})]});return Object(r.jsx)(Le.a,{overlay:a,arrow:!0,children:Object(r.jsx)(p.a,{type:"link",children:"..."})})},Ee=n(1999),Te=function(e){var t=e.project,n=Oe().mutateAsync,c=Object(a.useMemo)((function(){return t.pin?1:0}),[t.pin]);return Object(r.jsx)(Ee.a,{value:c,count:1,onChange:function(e){n({id:t.id,pin:!!e})}})},Fe=function(){var e=pe(),t=e.data,n=e.isLoading,c=U().data,i=Object(a.useMemo)((function(){return t?t.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{key:e.id})})):[]}),[t]),o=[{title:Object(r.jsx)(Te,{project:{pin:!0}}),dataIndex:"pin",key:"pin",render:function(e,t){return Object(r.jsx)(Te,{project:t})}},{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"name",key:"name",render:function(e,t){return Object(r.jsx)(ae.b,{to:"/projects/".concat(Number(t.id)),children:e})}},{title:"\u90e8\u95e8",dataIndex:"organization",key:"organization"},{title:"\u8d1f\u8d23\u4eba",dataIndex:"administrator",key:"administrator",render:function(e,t){var n=null===c||void 0===c?void 0:c.find((function(e){return e.id===t.personId}));return(null===n||void 0===n?void 0:n.name)||"\u672a\u77e5"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"created",key:"created",render:function(e){var t=e||new Date;return we()(t).format("YYYY-MM-DD")}},{title:"\u7f16\u8f91",dataIndex:"edit",key:"edit",render:function(e,t){return Object(r.jsx)(Ne,{project:t})}}];return Object(r.jsx)(ye.a,{columns:o,dataSource:i,pagination:!1,loading:n})};function Se(){var e=Object(u.a)(["\n    padding: 3.2rem;\n    .raw {\n        margin-bottom: 2rem;\n    }\n"]);return Se=function(){return e},e}var Pe=function(){return m("\u9879\u76ee\u5217\u8868"),Object(r.jsxs)(Me,{children:[Object(r.jsxs)(f.a,{justify:"space-between",align:"middle",className:"raw",children:[Object(r.jsx)("h1",{children:"\u9879\u76ee\u5217\u8868"}),Object(r.jsx)(p.a,{type:"link",onClick:function(){return y.projectForm()},children:"\u521b\u5efa\u9879\u76ee"})]}),Object(r.jsx)(xe,{}),Object(r.jsx)(Fe,{})]})},Me=s.a.div(Se()),De=n(29),Ae=n(1992),Qe=n(2005);function ze(){var e=Object(u.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: ",";\n    margin-bottom: ",";\n  \n    > * {\n      margin-top: 0 !important;\n      margin-bottom: 0 !important;\n      margin-right: ",";\n    }\n  "]);return ze=function(){return e},e}var Be=s.a.div(ze(),(function(e){return e.between?"space-between":void 0}),(function(e){return e.marginBottom+"rem"}),(function(e){return"number"===typeof e.gap?e.gap+"rem":e.gap?"2rem":void 0}));function Re(){var e,t=null===(e=Object(De.g)().pathname.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return Number(t)}function Ye(e,t,n,r){n=n||0;var a=(e=Object(W.a)(e))[t];e[t]=null;var c="after"===r?n+1:n;return e.splice(c,0,a),e=e.filter((function(e){return e}))}function qe(){var e=Object(u.a)(["\n    padding: 2rem;\n"]);return qe=function(){return e},e}var Ve=function(){var e=function(){var e=q(),t={projectId:Re()};return Object(T.a)([g.epics,t],Object(E.a)(N.a.mark((function n(){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(v.epics,{data:t});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))))}().data,t=function(){var e=q(),t={projectId:Re()},n=[g.epics,t];function r(){return(r=Object(E.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(v.epics,"/").concat(n.id),{method:"DELETE"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),de(n))}().mutateAsync,n=me(Re()).data;return Object(r.jsxs)(Ze,{children:[Object(r.jsxs)(Be,{between:!0,children:[Object(r.jsxs)("h1",{children:[null===n||void 0===n?void 0:n.name,"\u4efb\u52a1\u7ec4"]}),Object(r.jsx)(p.a,{type:"link",onClick:function(){return y.epicForm()},children:"\u521b\u5efa\u4efb\u52a1\u7ec4"})]}),Object(r.jsx)(Qe.b,{style:{overflow:"auto",height:"81vh"},itemLayout:"vertical",dataSource:e,renderItem:function(e){return Object(r.jsx)(Qe.b.Item,{children:Object(r.jsx)(Qe.b.Item.Meta,{title:Object(r.jsxs)(Be,{between:!0,children:[Object(r.jsx)("span",{children:e.name}),Object(r.jsx)(p.a,{type:"link",onClick:function(){return n=e,void Ie.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u9879\u76ee:".concat(n.name),content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk:function(){t(n)}});var n},children:"\u5220\u9664"})]}),description:Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4: ",we()(e.start).format("YYYY-MM-DD")]}),Object(r.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4: ",we()(e.end).format("YYYY-MM-DD")]})]})})})}})]})},Ze=s.a.div(qe());function Ke(){var e=ie(["name","processorId","typeId","tagId"]),t=e.params,n=e.setParams,r=Re();return{params:Object(a.useMemo)((function(){return Object(k.a)(Object(k.a)({},t),{},{projectId:r,processorId:Number(t.processorId)||void 0,typeId:Number(t.typeId)||void 0,tagId:Number(t.tagId)||void 0})}),[t,r]),setParams:n,reset:function(){n({name:void 0,processorId:void 0,typeId:void 0,tagId:void 0})}}}function He(){var e=Ke().params,t=ne(e);return Object(a.useMemo)((function(){return[g.tasks,ce(e)]}),[t])}function Ge(){var e=q(),t=He(),n=Object(F.b)();function r(){return(r=Object(E.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.tasksReorder,{data:n,method:"POST"});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),{onMutate:function(e){var r=n.getQueryData(t),a=function(e,t){var n=(e=Object(W.a)(e)).map((function(e){return e.id})),r=n.indexOf(t.fromId),a=n.indexOf(t.referenceId);return e[r].kanbanId=Number(t.toKanbanId),Ye(e,r,a,t.type)}(r,e);return n.setQueryData(t,a),r},onError:function(e,r,a){n.setQueryData(t,a)}})}function Je(){var e=q(),t=He(),n=t[1];function r(){return(r=Object(E.a)(N.a.mark((function t(){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.tasks,{data:n});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(T.a)(t,(function(){return r.apply(this,arguments)}))}function Ue(){var e=Re();return[g.kanbans,{projectId:e}]}function We(){var e=q(),t=Ue(),n=Object(F.b)();function r(){return(r=Object(E.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.kanbansReorder,{data:n,method:"POST"});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),{onMutate:function(e){var r=n.getQueryData(t),a=function(e,t){var n=(e=Object(W.a)(e)).map((function(e){return e.id})),r=n.indexOf(t.fromId),a=n.indexOf(t.referenceId);return Ye(e,r,a,t.type)}(r,e);return n.setQueryData(t,a),r},onError:function(e,r,a){n.setQueryData(t,a)}})}var Xe=function(e){var t=e.kanban,n=function(){var e=q(),t=Ue();return Object(S.a)((function(t){return e("".concat(v.kanbans,"/").concat(t.id),{method:"DELETE"})}),de(t))}().mutate;var a=Object(r.jsx)(Ce.a,{children:Object(r.jsx)(Ce.a.Item,{onClick:function(){n(t)},children:"\u5220\u9664"})});return Object(r.jsx)(Le.a,{overlay:a,arrow:!0,children:Object(r.jsx)(p.a,{type:"link",children:"..."})})},$e=n(2e3);function _e(){var e=Object(u.a)(["\n    .add {\n        padding-left: 1rem;\n    }\n"]);return _e=function(){return e},e}var et=function(e){var t=e.kanban,n=Object(a.useState)(!1),c=Object(te.a)(n,2),i=c[0],o=c[1],u=Object(a.useState)(""),s=Object(te.a)(u,2),d=s[0],j=s[1],l=Re(),b=function(){var e=q(),t=He();function n(){return(n=Object(E.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.tasks,{method:"POST",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return n.apply(this,arguments)}),se(t))}().mutateAsync;return Object(r.jsx)(tt,{children:i?Object(r.jsx)($e.a,{children:Object(r.jsx)(I.a,{placeholder:"\u9700\u8981\u505a\u70b9\u4ec0\u4e48",autoFocus:!0,value:d,onChange:function(e){return j(e.target.value)},onBlur:function(){return o(!1)},onPressEnter:function(){b({name:d,projectId:l,kanbanId:t.id}),j("")}})}):Object(r.jsx)("div",{className:"add",onClick:function(){return o(!0)},children:"+\u6dfb\u52a0task"})})},tt=s.a.div(_e()),nt=n.p+"static/media/task.69774797.svg",rt=n.p+"static/media/bug.5d8e8fd5.svg",at=function(e){var t=e.txt,n=e.keyword,a=t.split(n);return n?Object(r.jsx)(r.Fragment,{children:a.map((function(e,t){return Object(r.jsxs)("span",{children:[e,t!==a.length-1&&Object(r.jsx)("span",{style:{color:"#257AFD"},children:n})]},t)}))}):Object(r.jsx)(r.Fragment,{children:t})};function ct(){var e=Object(u.a)(["\n    margin-bottom: 1rem;\n"]);return ct=function(){return e},e}var it=function(e){var t=e.task,n=Ke().params,c=Object(a.useMemo)((function(){return 2===(null===t||void 0===t?void 0:t.typeId)?rt:nt}),[t]);return Object(r.jsxs)(ot,{onClick:function(){return y.taskForm(t)},children:[Object(r.jsx)("h3",{children:Object(r.jsx)(at,{txt:t.name,keyword:n.name})}),Object(r.jsx)("img",{src:c,alt:"icon"})]})},ot=Object(s.a)($e.a)(ct()),ut=n(129),st=n(122);function dt(){var e=Object(u.a)(["\n  background-color: ",";\n"]);return dt=function(){return e},e}var jt=s.a.div(dt(),(function(e){return e.isDraggingOver?e.hoverBg:e.bg})),lt=function(e){var t=e.children,n=e.className,a=e.bg,c=e.hoverBg,i=Object(ut.a)(e,["children","className","bg","hoverBg"]);return Object(r.jsx)(st.c,Object(k.a)(Object(k.a)({},i),{},{children:function(e,i){return Object(r.jsxs)(jt,Object(k.a)(Object(k.a)({},e.innerRef),{},{ref:e.innerRef,className:n,isDraggingOver:i.isDraggingOver,bg:a||"#fff",hoverBg:c||"#f7f7f7",children:[t,e.placeholder]}))}}))},bt=function(e){var t=e.className,n=e.children,a=e.dragAll,i=Object(ut.a)(e,["className","children","dragAll"]);return c.a.isValidElement(n)?Object(r.jsx)(st.b,Object(k.a)(Object(k.a)({},i),{},{children:function(e){var i=a?e.dragHandleProps:{};return Object(r.jsx)("div",Object(k.a)(Object(k.a)(Object(k.a)({className:t,ref:e.innerRef},e.draggableProps),i),{},{children:c.a.cloneElement(n,{provided:e})}))}})):Object(r.jsx)("div",{})};bt.defaultProps={dragAll:!0};var ft=bt;function pt(){var e=Object(u.a)(["\n    background-color: #f7f7f7;\n    min-width: 27rem;\n    height: 100%;\n    border-radius: 6px;\n    display: flex;\n    flex-direction: column;\n    padding: 0.7rem;\n    overflow: auto;\n    margin-right: 1rem;\n    .drop-content {\n        .task-drop {\n            min-height: 1rem;\n            .task-card {\n                margin-bottom: .5rem;\n            }\n        }\n    }\n"]);return pt=function(){return e},e}var mt=function(e){var t=e.kanban,n=e.provided,a=Je().data,c=null===a||void 0===a?void 0:a.filter((function(e){return e.kanbanId===t.id}));return Object(r.jsxs)(Ot,{children:[Object(r.jsxs)(Be,Object(k.a)(Object(k.a)({between:!0},null===n||void 0===n?void 0:n.dragHandleProps),{},{children:[Object(r.jsx)("h3",{children:t.name}),Object(r.jsx)(Xe,{kanban:t})]})),Object(r.jsxs)("div",{className:"drop-content",children:[Object(r.jsx)(lt,{droppableId:String(t.id),type:"task",direction:"vertical",className:"task-drop",bg:"#f7f7f7",children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(r.jsx)(ft,{draggableId:String(e.id),index:t,children:Object(r.jsx)(it,{task:e})},e.id)}))}),Object(r.jsx)(et,{kanban:t})]})]})},Ot=s.a.div(pt()),ht=function(){var e=Object(a.useState)(""),t=Object(te.a)(e,2),n=t[0],c=t[1],i=Re(),o=function(){var e=q(),t=Ue();return Object(S.a)((function(t){return e(v.kanbans,{method:"POST",data:t})}),se(t))}().mutateAsync;function u(){return(u=Object(E.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({name:n,projectId:i});case 2:c("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsx)(Ot,{children:Object(r.jsx)(I.a,{size:"large",placeholder:"\u65b0\u5efa\u770b\u677f\u540d\u79f0",value:n,onChange:function(e){return c(e.target.value)},onPressEnter:function(){return u.apply(this,arguments)}})})};function vt(){var e=Object(u.a)(["\n    .ant-select-selection-item {\n        text-align: left;\n    }\n"]);return vt=function(){return e},e}var xt=function(e){var t=X(function(){var e=q();function t(){return(t=Object(E.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.taskTypes);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(T.a)([g.taskTypes],(function(){return t.apply(this,arguments)}))}().data,"\u7c7b\u578b"),n=t.options,a=t.defaultValue;return Object(r.jsx)(gt,Object(k.a)(Object(k.a)({},e),{},{value:e.value||a,options:n}))},gt=Object(s.a)(C.a)(vt());function yt(){var e=Object(u.a)(["\n    .input {\n        width: 20rem;\n    }\n"]);return yt=function(){return e},e}var kt=function(){var e=Ke(),t=e.params,n=e.setParams,a=e.reset;return Object(r.jsxs)(wt,{gap:1,marginBottom:2,children:[Object(r.jsx)(I.a,{className:"input",value:t.name,onChange:function(e){return t=e.target.value,void n({name:t});var t}}),Object(r.jsx)(_,{value:t.processorId,onChange:function(e){return n({processorId:e})}}),Object(r.jsx)(xt,{value:t.typeId,onChange:function(e){return n({typeId:e})}}),Object(r.jsx)(p.a,{onClick:a,children:"\u6e05\u9664\u7b5b\u9009\u5668"})]})},wt=Object(s.a)(Be)(yt()),It=n(1997);function Ct(){var e=Object(u.a)(["\n    padding: 2rem;\n    .title {\n        margin-bottom: 1rem;\n    }\n    .loading {\n        width: 100%;\n        height: calc(100vw - 6rem);\n    }\n    .column-content {\n        height: calc(100vh - 20rem);\n        display: flex;\n        overflow: scroll;\n        .kanbans {\n            display: flex;\n        }\n    }\n"]);return Ct=function(){return e},e}var Lt=function(){var e=function(){var e=Re();return me(e)}(),t=e.data,n=e.isLoading,a=Je(),c=a.data,i=a.isLoading,o=n||i,u=function(){var e=q(),t=Ue(),n=t[1];return Object(T.a)(t,(function(){return e(v.kanbans,{data:n})}))}().data,s=We().mutateAsync,d=Ge().mutateAsync;return Object(r.jsxs)(Nt,{children:[Object(r.jsxs)("h1",{className:"title",children:[null===t||void 0===t?void 0:t.name,"\u770b\u677f"]}),Object(r.jsx)(kt,{}),Object(r.jsx)(It.a.Text,{type:"secondary",children:"\u957f\u6309\u62d6\u62fd"}),o?Object(r.jsx)(l,{className:"loading"}):Object(r.jsx)(st.a,{onDragEnd:function(e){var t=e.source,n=e.destination,r=e.draggableId,a=e.type;if(u&&n&&c){if("column"===a){var i=u[t.index],o=u[n.index];s({fromId:i.id,referenceId:o.id,type:t.index<n.index?"after":"before"})}if("task"===a){var j=c.filter((function(e){return e.kanbanId===Number(n.droppableId)})),l=j[n.index]||j[n.index-1],b=function(e){var t=e.arr,n=e.fromKanbanId,r=e.fromIndex,a=e.toKanbanId,c=e.toIndex;return n===a?r<c?"after":"before":t[c]?"before":"after"}({arr:j,fromIndex:t.index,fromKanbanId:Number(t.droppableId),toIndex:n.index,toKanbanId:Number(n.droppableId)});d({fromKanbanId:Number(t.droppableId),fromId:Number(r),toKanbanId:Number(n.droppableId),referenceId:null===l||void 0===l?void 0:l.id,type:b})}}},children:Object(r.jsxs)("div",{className:"column-content",children:[Object(r.jsx)(lt,{className:"kanbans",droppableId:"columns-drop",type:"column",direction:"horizontal",hoverBg:"#fff",children:null===u||void 0===u?void 0:u.map((function(e,t){return Object(r.jsx)(ft,{draggableId:"kanban-".concat(e.id),index:t,dragAll:!1,children:Object(r.jsx)(mt,{kanban:e},e.id)},e.id)}))}),Object(r.jsx)(ht,{})]})})]})},Nt=s.a.div(Ct());function Et(){var e=Object(u.a)(["\n    height: 100%;\n    .ant-menu-item {\n        margin-top: 0;\n    }\n"]);return Et=function(){return e},e}var Tt=function(){var e=function(){var e=Object(De.g)().pathname.split("/");return e[e.length-1]}();return Object(r.jsxs)(Ft,{mode:"inline",selectedKeys:[e],children:[Object(r.jsx)(Ce.a.Item,{children:Object(r.jsx)(ae.b,{to:"kanban",children:"\u770b\u677f"})},"kanban"),Object(r.jsx)(Ce.a.Item,{children:Object(r.jsx)(ae.b,{to:"epic",children:"\u4efb\u52a1\u7ec4"})},"epic")]})},Ft=Object(s.a)(Ce.a)(Et());function St(){var e=Object(u.a)(["\n    height: calc(100vh - 6rem);\n    .content {\n        background-color: #fff;\n        overflow: hidden;\n    }\n"]);return St=function(){return e},e}var Pt=Ae.a.Sider,Mt=Ae.a.Content,Dt=function(){return m("\u9879\u76ee\u7ba1\u7406"),Object(r.jsxs)(At,{children:[Object(r.jsx)(Pt,{theme:"light",children:Object(r.jsx)(Tt,{})}),Object(r.jsx)(Mt,{className:"content",children:Object(r.jsxs)(De.d,{children:[Object(r.jsx)(De.b,{path:"/kanban",element:Object(r.jsx)(Lt,{})}),Object(r.jsx)(De.b,{path:"/epic",element:Object(r.jsx)(Ve,{})}),Object(r.jsx)(De.a,{to:window.location.pathname+"/kanban",replace:!0})]})})]})},At=Object(s.a)(Ae.a)(St());function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bt=a.createElement("defs",null,a.createElement("linearGradient",{x1:"98.0308675%",y1:"0.160599572%",x2:"58.8877062%",y2:"40.7655246%",id:"uid5"},a.createElement("stop",{stopColor:"#0052CC",offset:"18%"}),a.createElement("stop",{stopColor:"#2684FF",offset:"100%"}))),Rt=a.createElement("g",{stroke:"none",strokeWidth:1,fillRule:"nonzero"},a.createElement("path",{d:"M22.9366667,4 L11.41,4 C11.41,5.3800098 11.9582068,6.703498 12.934021,7.67931228 C13.9098353,8.65512657 15.2333235,9.20333333 16.6133333,9.20333333 L18.7366667,9.20333333 L18.7366667,11.2533333 C18.7385054,14.1244521 21.0655479,16.4514946 23.9366667,16.4533333 L23.9366667,5 C23.9366667,4.44771525 23.4889514,4 22.9366667,4 Z",fill:"currentColor"}),a.createElement("path",{d:"M17.2333333,9.74333333 L5.70666667,9.74333333 C5.70850536,12.6144521 8.03554792,14.9414946 10.9066667,14.9433333 L13.03,14.9433333 L13.03,17 C13.0336786,19.8711178 15.3622132,22.196669 18.2333333,22.1966667 L18.2333333,10.7433333 C18.2333333,10.1910486 17.7856181,9.74333333 17.2333333,9.74333333 Z",fill:"url(#uid5)"}),a.createElement("path",{d:"M11.5266667,15.4833333 L0,15.4833333 C3.51929402e-16,18.357055 2.32961169,20.6866667 5.20333333,20.6866667 L7.33333333,20.6866667 L7.33333333,22.7366667 C7.33516565,25.6051863 9.65815176,27.9311544 12.5266667,27.9366667 L12.5266667,16.4833333 C12.5266667,15.9310486 12.0789514,15.4833333 11.5266667,15.4833333 Z",fill:"url(#uid5)"}),a.createElement("path",{d:"M37.07,18.956 C37.07,20.646 36.394,21.842 34.418,21.842 C33.56,21.842 32.702,21.686 32,21.4 L32,23.662 C32.65,23.896 33.586,24.104 34.808,24.104 C38.032,24.104 39.41,21.946 39.41,18.8 L39.41,6.918 L37.07,6.918 L37.07,18.956 Z M42.894,7.568 C42.894,8.556 43.544,9.128 44.454,9.128 C45.364,9.128 46.014,8.556 46.014,7.568 C46.014,6.58 45.364,6.008 44.454,6.008 C43.544,6.008 42.894,6.58 42.894,7.568 Z M43.31,24 L45.546,24 L45.546,11 L43.31,11 L43.31,24 Z M48.926,24 L51.11,24 L51.11,16.33 C51.11,13.574 52.852,12.716 55.712,13.002 L55.712,10.818 C53.164,10.662 51.864,11.754 51.11,13.288 L51.11,11 L48.926,11 L48.926,24 Z M66.45,24 L66.45,21.66 C65.618,23.376 64.058,24.26 62.056,24.26 C58.598,24.26 56.856,21.322 56.856,17.5 C56.856,13.834 58.676,10.74 62.316,10.74 C64.214,10.74 65.67,11.598 66.45,13.288 L66.45,11 L68.686,11 L68.686,24 L66.45,24 Z M59.092,17.5 C59.092,20.62 60.34,22.18 62.654,22.18 C64.656,22.18 66.45,20.906 66.45,18.02 L66.45,16.98 C66.45,14.094 64.812,12.82 62.914,12.82 C60.392,12.82 59.092,14.484 59.092,17.5 Z",fillRule:"evenodd",fill:"inherit"}));function Yt(e,t){var n=e.title,r=e.titleId,c=zt(e,["title","titleId"]);return a.createElement("svg",Qt({viewBox:"0 0 69 32",xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true",ref:t,"aria-labelledby":r},c),n?a.createElement("title",{id:r},n):null,Bt,Rt)}var qt=a.forwardRef(Yt),Vt=(n.p,n(2006));function Zt(){var e=Object(u.a)(["\n    min-width: 15rem;\n"]);return Zt=function(){return e},e}var Kt=function(){var e=U(),t=e.data,n=e.refetch,a=Object(r.jsxs)(Ht,{children:[Object(r.jsx)(It.a.Text,{type:"secondary",children:"\u7ec4\u5458\u5217\u8868"}),Object(r.jsx)(Qe.b,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(r.jsx)(Qe.b.Item,{children:e.name},e.id)}))})]});return Object(r.jsx)(Vt.a,{content:a,onVisibleChange:function(){return n()},children:Object(r.jsx)("span",{children:"\u6210\u5458"})})},Ht=s.a.div(Zt()),Gt=n(1993);function Jt(){var e=Object(u.a)(["\n    min-width: 15rem;\n"]);return Jt=function(){return e},e}var Ut=function(){var e=pe(),t=e.data,n=e.refetch,a=null===t||void 0===t?void 0:t.filter((function(e){return e.pin})),c=Object(r.jsxs)(Wt,{children:[Object(r.jsx)(It.a.Text,{type:"secondary",children:"\u6536\u85cf\u9879\u76ee"}),Object(r.jsx)(Qe.b,{children:null===a||void 0===a?void 0:a.map((function(e){return Object(r.jsx)(Qe.b.Item,{children:e.name},e.id)}))}),Object(r.jsx)(Gt.a,{}),Object(r.jsx)(p.a,{type:"text",onClick:function(){return y.projectForm()},children:"+\u521b\u5efa\u9879\u76ee"})]});return Object(r.jsx)(Vt.a,{content:c,onVisibleChange:function(){return n()},children:Object(r.jsx)("span",{children:"\u9879\u76ee"})})},Wt=s.a.div(Jt());function Xt(){var e=Object(u.a)(["\n    padding: 0 3.5rem;\n    height: 6rem;\n    background-color: #fff;\n    display: grid;\n    grid-template-rows: 1fr;\n    grid-template-columns: 8rem 100px 100px 1fr 100px;\n    box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1) inset;\n    > * {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n"]);return Xt=function(){return e},e}var $t=function(){var e=J().data;U().data;var t=Object(r.jsx)(Ce.a,{style:{textAlign:"center"},children:Object(r.jsx)(Ce.a.Item,{onClick:K,children:"\u767b\u51fa"},"logout")});return Object(r.jsxs)(_t,{children:[Object(r.jsx)("div",{onClick:function(){window.location.pathname=""},children:Object(r.jsx)(qt,{})}),Object(r.jsx)(Ut,{}),Object(r.jsx)(Kt,{}),Object(r.jsx)("div",{}),Object(r.jsx)(Le.a,{overlay:t,placement:"bottomCenter",arrow:!0,children:Object(r.jsxs)("span",{children:["Hi, ",null===e||void 0===e?void 0:e.name]})})]})},_t=s.a.div(Xt());function en(){var e=Object(u.a)(["\n\n"]);return en=function(){return e},e}var tn=function(){return Object(r.jsxs)(nn,{children:[Object(r.jsx)($t,{}),Object(r.jsxs)(De.d,{children:[Object(r.jsx)(De.b,{path:"/projects",element:Object(r.jsx)(Pe,{})}),Object(r.jsx)(De.b,{path:"/projects/:id/*",element:Object(r.jsx)(Dt,{})}),Object(r.jsx)(De.a,{to:"/projects",replace:!0})]})]})},nn=s.a.div(en());function rn(){var e=Object(u.a)(["\n    .btn {\n        width: 100%;\n    }\n"]);return rn=function(){return e},e}var an=function(e){var t=e.onError;m("\u767b\u5f55");var n=function(){var e=Object(F.b)();return Object(S.a)(Z,{onSuccess:function(){return e.invalidateQueries(g.userInfo)}})}(),a=n.mutateAsync,c=n.isLoading;return Object(r.jsx)(cn,{children:Object(r.jsxs)(w.a,{onFinish:function(e){a(e).catch((function(e){return t(e)}))},children:[Object(r.jsx)(w.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(r.jsx)(I.a,{placeholder:"\u7528\u6237\u540d"})}),Object(r.jsx)(w.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(r.jsx)(I.a.Password,{placeholder:"\u5bc6\u7801"})}),Object(r.jsx)(w.a.Item,{children:Object(r.jsx)(p.a,{className:"btn",type:"primary",htmlType:"submit",loading:c,children:"\u767b\u5f55"})})]})})},cn=s.a.div(rn()),on=n.p+"static/media/logo.6c866125.svg",un=n.p+"static/media/left.e74de3ec.svg",sn=n.p+"static/media/right.b423a6cf.svg";function dn(){var e=Object(u.a)(["\n    .btn {\n        width: 100%;\n    }\n"]);return dn=function(){return e},e}var jn=function(e){var t=e.onError;m("\u6ce8\u518c");var n=function(){var e=Object(F.b)();return Object(S.a)(V,{onSuccess:function(){return e.invalidateQueries(g.userInfo)}})}(),a=n.mutateAsync,c=n.isLoading;return Object(r.jsx)(ln,{children:Object(r.jsxs)(w.a,{onFinish:function(e){var n=e.cpassword,r=Object(ut.a)(e,["cpassword"]);if(r.password===n)a(r).catch((function(e){return t(e)}));else{var c=new Error("\u8bf7\u786e\u4fdd\u4e24\u6b21\u5bc6\u7801\u76f8\u540c");t(c)}},children:[Object(r.jsx)(w.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}],children:Object(r.jsx)(I.a,{placeholder:"\u7528\u6237\u540d"})}),Object(r.jsx)(w.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}],children:Object(r.jsx)(I.a.Password,{placeholder:"\u5bc6\u7801"})}),Object(r.jsx)(w.a.Item,{name:"cpassword",rules:[{required:!0,message:"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801"}],children:Object(r.jsx)(I.a.Password,{placeholder:"\u786e\u8ba4\u5bc6\u7801",type:"text"})}),Object(r.jsx)(w.a.Item,{children:Object(r.jsx)(p.a,{className:"btn",type:"primary",htmlType:"submit",loading:c,children:"\u6ce8\u518c"})})]})})},ln=s.a.div(dn());function bn(){var e=Object(u.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    min-height: 100vh;\n    .header {\n        background: url(",") no-repeat center;\n        padding: 5rem 0;\n        background-size: 8rem;\n        width: 100%;\n    }\n    .card {\n        width: 40rem;\n        min-height: 56rem;\n        padding: 3.2rem 4rem;\n        border-radius: 0.3rem;\n        box-sizing: border-box;\n        box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\n        text-align: center;\n    }\n    .bg {\n        position: absolute;\n        width: 100vw;\n        height: 100vh;\n        background-attachment: fixed;\n        background-repeat: no-repeat;\n        background-image: url(","), url(",");\n        background-position: left bottom, right bottom;\n        background-size: calc((100vw/2) - 21rem);\n    }\n    .title {\n        margin-bottom: 2.4rem;\n        color: rgb(94, 108, 132);\n    }\n"]);return bn=function(){return e},e}var fn=function(){var e=Object(a.useState)(!1),t=Object(te.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(),o=Object(te.a)(i,2),u=o[0],s=o[1],d=Object(a.useMemo)((function(){return n?"\u5df2\u7ecf\u6709\u8d26\u53f7\u4e86?\u76f4\u63a5\u767b\u5f55":"\u6ca1\u6709\u8d26\u53f7?\u6ce8\u518c\u65b0\u8d26\u53f7"}),[n]),j=Object(a.useMemo)((function(){return n?"\u6ce8\u518c":"\u767b\u5f55"}),[n]);return Object(r.jsxs)(pn,{children:[Object(r.jsx)("div",{className:"header"}),Object(r.jsx)("div",{className:"bg"}),Object(r.jsxs)($e.a,{className:"card",children:[Object(r.jsx)("h2",{className:"title",children:j}),u&&Object(r.jsx)(It.a.Text,{type:"danger",children:u.message}),n?Object(r.jsx)(jn,{onError:s}):Object(r.jsx)(an,{onError:s}),Object(r.jsx)(Gt.a,{}),Object(r.jsx)("a",{onClick:function(){return c(!n)},children:d})]})]})},pn=s.a.div(bn(),on,un,sn);var mn=function(){var e=J(),t=e.data,n=e.isLoading;return Object(r.jsx)("div",{className:"App",children:t?Object(r.jsx)(tn,{}):n?Object(r.jsx)(l,{}):Object(r.jsx)(fn,{})})},On=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,2007)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},hn=n(214),vn=(n(410),n(411),n(2001)),xn=n(1994),gn=n(121);function yn(){var e=Object(u.a)(["\n    .ant-drawer-body {\n        display: flex;\n        justify-content: center;\n        align-items: flex-start;\n        padding: 32px;\n        padding-top: 200px;\n        .form {\n            width: 50vw;\n            text-align: center;\n            .submit {\n                text-align: right;\n            }\n        }\n    }\n"]);return yn=function(){return e},e}var kn=function(){var e=Object(gn.useForm)(),t=Object(te.a)(e,1)[0],n=Object(a.useState)(!1),c=Object(te.a)(n,2),i=c[0],o=c[1],u=Object(a.useState)(),s=Object(te.a)(u,2),d=s[0],j=s[1],l=(d?Oe:he)(),b=l.mutateAsync,f=l.isLoading;function m(){o(!1),t.resetFields()}return y.projectForm=function(){var e=Object(E.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!i),null===n||void 0===n?void 0:n.id){e.next=3;break}return e.abrupt("return");case 3:j(n),t.setFieldsValue(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(r.jsx)(wn,{visible:i,onClose:m,width:"100vw",children:Object(r.jsxs)(w.a,{layout:"vertical",className:"form",onFinish:function(e){b(Object(k.a)(Object(k.a)({},d),e)).then((function(){return m()}))},form:t,children:[Object(r.jsx)("h2",{className:"title",children:"\u521b\u5efa\u9879\u76ee"}),Object(r.jsx)(w.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8f93\u5165\u9879\u76ee\u540d\u79f0"}],children:Object(r.jsx)(I.a,{placeholder:"\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),Object(r.jsx)(w.a.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8f93\u5165\u90e8\u95e8\u540d\u79f0"}],children:Object(r.jsx)(I.a,{placeholder:"\u8f93\u5165\u90e8\u95e8\u540d\u79f0"})}),Object(r.jsx)(w.a.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",children:Object(r.jsx)(_,{})}),Object(r.jsx)(w.a.Item,{className:"submit",children:Object(r.jsx)(p.a,{type:"primary",htmlType:"submit",loading:f,children:"\u63d0\u4ea4"})})]})})},wn=Object(s.a)(xn.a)(yn());function In(){var e=Object(u.a)(["\n    .btn-content {\n        text-align: right;\n    }\n"]);return In=function(){return e},e}var Cn={labelCol:{span:8},wrapperCol:{span:16}},Ln=function(){var e=Object(gn.useForm)(),t=Object(te.a)(e,1)[0],n=Object(a.useState)(!1),c=Object(te.a)(n,2),i=c[0],o=c[1],u=Object(a.useState)(),s=Object(te.a)(u,2),d=s[0],j=s[1],l=function(){var e=q(),t=He();function n(){return(n=Object(E.a)(N.a.mark((function t(n){var r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(v.tasks,"/").concat(n.id),{method:"PATCH",data:n});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return n.apply(this,arguments)}),ue(t))}(),b=l.mutateAsync,f=l.isLoading,m=function(){var e=q(),t=He();function n(){return(n=Object(E.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e("".concat(v.tasks,"/").concat(n.id),{method:"DELETE"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return n.apply(this,arguments)}),de(t))}(),O=m.mutateAsync,h=m.isLoading;function x(){t.resetFields(),o(!1)}function g(){return(g=Object(E.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=3;break}return e.next=3,O(d);case 3:x();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return y.taskForm=function(){var e=Object(E.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(!i),null===n||void 0===n?void 0:n.id){e.next=3;break}return e.abrupt("return");case 3:j(n),t.setFieldsValue(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(r.jsx)(Nn,{title:"\u7f16\u8f91\u4efb\u52a1",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",confirmLoading:f,visible:i,onOk:function(){var e=t.getFieldsValue();b(Object(k.a)(Object(k.a)({},d),e)).then((function(){return x()}))},onCancel:x,children:Object(r.jsxs)(w.a,Object(k.a)(Object(k.a)({className:"form"},Cn),{},{form:t,children:[Object(r.jsx)(w.a.Item,{label:"\u4efb\u52a1\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d"}],children:Object(r.jsx)(I.a,{placeholder:"\u8f93\u5165\u4efb\u52a1\u540d"})}),Object(r.jsx)(w.a.Item,{label:"\u7ecf\u529e\u4eba",name:"processorId",children:Object(r.jsx)(_,{})}),Object(r.jsx)(w.a.Item,{label:"\u7c7b\u578b",name:"typeId",children:Object(r.jsx)(xt,{})}),Object(r.jsx)("div",{className:"btn-content",children:Object(r.jsx)(p.a,{type:"primary",loading:h,onClick:function(){return g.apply(this,arguments)},size:"small",children:"\u5220\u9664"})})]}))})},Nn=Object(s.a)(Ie.a)(In());function En(){var e=Object(u.a)(["\n    .ant-drawer-body {\n        display: flex;\n        justify-content: center;\n        align-items: flex-start;\n        padding: 32px;\n        padding-top: 200px;\n        .form {\n            width: 50vw;\n            text-align: center;\n            .submit {\n                text-align: right;\n            }\n        }\n    }\n"]);return En=function(){return e},e}var Tn=function(){var e=Object(gn.useForm)(),t=Object(te.a)(e,1)[0],n=Object(a.useState)(!1),c=Object(te.a)(n,2),i=c[0],o=c[1],u=function(){var e=q(),t={projectId:Re()},n=[g.epics,t];function r(){return(r=Object(E.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(v.epics,{method:"POST",data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(S.a)((function(e){return r.apply(this,arguments)}),se(n))}(),s=u.mutateAsync,d=u.isLoading,j=Re();function l(){o(!1),t.resetFields()}return y.epicForm=function(){var e=Object(E.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(!i);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(r.jsx)(Fn,{visible:i,onClose:l,width:"100vw",children:Object(r.jsxs)(w.a,{layout:"vertical",className:"form",onFinish:function(e){s(Object(k.a)(Object(k.a)({},e),{},{projectId:j})).then((function(){return l()}))},form:t,children:[Object(r.jsx)("h2",{className:"title",children:"\u521b\u5efa\u4efb\u52a1"}),Object(r.jsx)(w.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8f93\u5165\u9879\u76ee\u540d\u79f0"}],children:Object(r.jsx)(I.a,{placeholder:"\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),Object(r.jsx)(w.a.Item,{className:"submit",children:Object(r.jsx)(p.a,{type:"primary",htmlType:"submit",loading:d,children:"\u63d0\u4ea4"})})]})})},Fn=Object(s.a)(xn.a)(En()),Sn=function(e){var t=e.children;return Object(r.jsx)(F.a,{client:new vn.a,children:Object(r.jsxs)(ae.a,{children:[t,Object(r.jsx)(kn,{}),Object(r.jsx)(Ln,{}),Object(r.jsx)(Tn,{})]})})};Object(hn.b)((function(){return o.a.render(Object(r.jsxs)(Sn,{children:[Object(r.jsx)(hn.a,{}),Object(r.jsx)(mn,{})]}),document.getElementById("root"))})),On()},411:function(e,t,n){}},[[1988,1,2]]]);
//# sourceMappingURL=main.a04938fd.chunk.js.map